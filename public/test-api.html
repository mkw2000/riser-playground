<!DOCTYPE html>
<html>
<head>
    <title>Test Vector Express API</title>
</head>
<body>
    <h1>Test Vector Express API</h1>
    <button onclick="testAPI()">Test API Endpoint</button>
    <pre id="output"></pre>

    <script>
        async function testAPI() {
            const output = document.getElementById('output');
            output.textContent = 'Testing API...\n';
            
            const testSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">
                <rect x="10" y="10" width="80" height="80" fill="red"/>
                <circle cx="50" cy="50" r="20" fill="blue"/>
            </svg>`;
            
            try {
                output.textContent += 'Sending request to /api/convert-svg-to-dxf\n';
                
                const response = await fetch('/api/convert-svg-to-dxf', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ svg: testSVG })
                });
                
                output.textContent += `Response status: ${response.status}\n`;
                output.textContent += `Response headers:\n`;
                for (let [key, value] of response.headers) {
                    output.textContent += `  ${key}: ${value}\n`;
                }
                
                const result = await response.json();
                output.textContent += '\nResponse body:\n';
                output.textContent += JSON.stringify(result, null, 2);
                
                if (result.success) {
                    output.textContent += '\n\n✅ API is working!';
                    output.textContent += `\nConverter used: ${result.converter}`;
                    output.textContent += `\nDXF size: ${result.dxf.length} characters (base64)`;
                }
                
            } catch (error) {
                output.textContent += '\n❌ Error: ' + error.message;
                output.textContent += '\n' + error.stack;
            }
        }
    </script>
</body>
</html>